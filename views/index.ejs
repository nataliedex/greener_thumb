<%- include('partials/header') %>
    <main>
        <div class="bd-masthead mb-3" id="content">
            <div class="container-xxl bd-gutter">
              <div class="col-md-8 mx-auto text-center">
                
                <h1>Plant API</h1>

                <div class="container">
                    <form action="/data" method="GET">
                        <label for="edible">Edible:</label>
                        <select class="form-select" name="edible" id="edible">
                            <option value="none">No Preference</option>
                            <option value="1">Edible</option>
                            <option value="">Not for consumption</option>
                        </select>
                
                        <label for="poisonous">Good for Pets and Kids:</label>
                        <select class="form-select" name="poisonous" id="poisonous">
                            <option value="none">No Preference</option>
                            <option value="1">Not Appropriate</option>
                            <option value="">Good for Pets and Kids</option>
                        </select>
                
                        <label for="watering">Watering:</label>
                        <select class="form-select" name="watering" id="watering">
                            <option value="none">No Preference</option>
                            <option value="frequent">Frequent</option>
                            <option value="average">Average</option>
                            <option value="minimum">Minimum</option>
                            <option value="none">None</option>
                        </select>
                
                        <label for="sunlight">Sunlight:</label>
                        <select class="form-select" name="sunlight" id="sunlight">
                            <option value="none">No Preference</option>
                            <option value="full_shade">Full Shade</option>
                            <option value="part_shade">Part Shade</option>
                            <option value="sun-part">Sun Part</option>
                            <option value="shade">Shade</option>
                            <option value="full_sun">Full Sun</option>
                        </select>
                
                        <button class="btn btn-primary" id="submit-button" type="submit">Submit</button>
        
                    </form>
                     
                </div>
                <h2>List of Plants: <%= data ? (data.length > 10 ? 10 : data.length)  : "" %></h2>
                
                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                    <% if(data && data.length > 0){ %>
                        <% for(let i = 0; i < data.length && i < 10; i++){ %>
                            <div class="col">
                                <div class="card shadow-sm">
                                  <% if (data[i].default_image && data[i].default_image.regular_url) { %>
                                      <img class="bd-placeholder-img card-img-top" width="100%" height="225" src="<%= data[i].default_image.regular_url %>" alt="<%= data[i].common_name %>">
                                  <% } else { %>
                                      <p class="bd-placeholder-img card-img-top" width="100%" height="225">No image available</p>
                                  <% } %>
                                  <div class="card-body">
                                    <p class="card-text"><strong>Common Name:</strong> <%= data[i].common_name %></p>
                                    <p class="card-text"><strong>Family:</strong> <%= data[i].family %></p>
                                  </div>
                                </div>
                              </div>
                        <% } %>
                    <% } else { %>
                        <p>No plants found with the selected filters</p>
                    <% } %>
                  </div>
              </div>
            </div>
          </div>
    </main>
<%- include('partials/footer') %>
